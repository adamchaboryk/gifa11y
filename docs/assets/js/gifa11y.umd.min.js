/*! Gifa11y 2.2.1 | @author Adam Chaboryk Â© 2021 - 2025 | @license MIT | @contact adam@chaboryk.xyz | https://github.com/adamchaboryk/gifa11y */
(function(y,p){typeof exports=="object"&&typeof module<"u"?module.exports=p():typeof define=="function"&&define.amd?define(p):(y=typeof globalThis<"u"?globalThis:y||self,y.Gifa11y=p())})(this,(function(){"use strict";function y(u="detect"){let t=u;const e=window.gifa11yOption,n=document.getElementById("gifa11y-all"),s=document.querySelector("html");if(t==="detect"){t=s.getAttribute("data-gifa11y-all")==="paused"?"playing":"paused";const r=new CustomEvent("gifa11yState",{detail:{newState:t,target:"all"}});window.dispatchEvent(r)}s.setAttribute("data-gifa11y-all",t);let a,i,d,c;s.getAttribute("data-gifa11y-all")==="paused"?(a="block",i="none",d="paused",c=e.langPlay,n&&(n.innerText=e.langPlayAllButton),window.gifa11yOption.initiallyPaused=!0):(a="none",i="block",d="playing",c=e.langPause,n&&(n.innerText=e.langPauseAllButton),window.gifa11yOption.initiallyPaused=!1),window.a11ygifs.forEach(r=>{const l=r;l.style.display=i}),document.querySelectorAll("[data-gifa11y-canvas]").forEach(r=>{const l=r;l.style.display=a}),document.querySelectorAll("gifa11y-button").forEach(r=>{const l=r.shadowRoot.querySelector("button"),m=l.getAttribute("data-gifa11y-alt"),b=l.querySelector(".play"),f=l.querySelector(".pause");b.style.display=a,f.style.display=i,l.setAttribute("data-gifa11y-state",d),l.setAttribute("aria-label",`${c} ${m}`)})}function p(){const u=window.gifa11yOption,t=document.getElementById("gifa11y-all"),e=window.matchMedia("(prefers-reduced-motion: reduce)"),n=document.querySelector("html");if(t!==null){if(!e||e.matches||u.initiallyPaused?(n.setAttribute("data-gifa11y-all","paused"),t.innerText=u.langPlayAllButton):(n.setAttribute("data-gifa11y-all","playing"),t.innerText=u.langPauseAllButton),t.setAttribute("disabled","true"),window.a11ygifs.filter(a=>!a.complete).length>0){const a=window.a11ygifs.filter(i=>!i.complete).map(i=>new Promise(d=>{const c=i;c.onload=d,c.onerror=d}));Promise.all(a).then(()=>{t&&(t.addEventListener("click",()=>{y()}),t.removeAttribute("disabled"))})}window.setTimeout(()=>{t.removeEventListener("click",y);const a=n.getAttribute("data-gifa11y-all")==="paused"?"paused":"playing";t.addEventListener("click",y(a),{once:!0}),t.removeAttribute("disabled")},5e3)}}function A(u,t){const e=document.querySelector(t.container),n=e||document.querySelector("body"),s=t.exclusions?`, ${t.exclusions}`:"";Array.from(n.querySelectorAll(`:is(${t.target}):not([src*="gifa11y-ignore"], [data-gifa11y-state], .gifa11y-ignore${s})`)).forEach(i=>{u.push(i)})}const P=':host{--gifa11y-font:system-ui,"Segoe UI",roboto,helvetica,arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}*,:before,:after{box-sizing:border-box}button{z-index:500;text-align:center;cursor:pointer;justify-content:center;align-items:center;min-width:36px;min-height:36px;margin:12px;padding:4px;line-height:normal;transition:all .2s ease-in-out;display:flex;position:absolute;box-shadow:0 0 16px #0000004f}button:before{content:"";min-width:50px;min-height:50px;position:absolute;inset:-8.5px}button:focus-visible{outline:3px solid #0000}.v2{text-align:center;border-radius:5px;flex-wrap:wrap;place-content:center;align-items:center;display:flex}.v2:after{font-family:var(--gifa11y-font);content:"GIF";padding-left:3px;padding-right:3px;font-weight:600;line-height:0;display:inline-block}i{vertical-align:middle;padding:4px}svg{vertical-align:middle;flex-shrink:0;display:block;position:relative}';class S extends HTMLElement{constructor(){super(),this.option=window.gifa11yOption}connectedCallback(){const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.innerHTML=`
      ${P}
      button {
        background: ${this.option.buttonBackground};
        border: ${this.option.buttonBorder};
        color: ${this.option.buttonIconColor};
      }
      button:hover, button:focus-visible {
        background: ${this.option.buttonBackgroundHover};
      }
      button:focus-visible {
        box-shadow: 0 0 0 5px ${this.option.buttonFocusColor};
      }
      .v1 {
        border-radius: ${this.option.buttonBorderRadius};
      }
      i {
        font-size: ${this.option.buttonIconFontSize};
        min-width: calc(${this.option.buttonIconFontSize} * 1.4);
        min-height: calc(${this.option.buttonIconFontSize} * 1.4);
      }
      svg {
        height: ${this.option.buttonIconSize};
        width: ${this.option.buttonIconSize};
      }
      button:after {
        font-size: ${this.option.buttonIconFontSize};
      }
      .warning, .warning:hover {
        border-radius: 5px;
        background: #cf0000;
        color: white;
      }
      .warning:after {
        content: '${this.option.langAltWarning}';
        padding: 5px;
      }`,t.appendChild(e)}}function I(u,t){const e=u,n=window.matchMedia("(prefers-reduced-motion: reduce)"),s=e.nextElementSibling;let a,i,d,c;const h=e.src;!n||n.matches||e.classList.contains("gifa11y-paused")||h.indexOf("gifa11y-paused")>-1||t.initiallyPaused===!0?(a=t.langPlay,c="block",d="none",i="paused"):(a=t.langPause,c="none",d="block",i="playing");const o=document.createElement("button");let g=e.getAttribute("alt");(g===null||g===""||g===" ")&&(g=t.langMissingAlt,t.missingAltWarning===!0&&o.classList.add("warning")),o.setAttribute("aria-label",`${a} ${g}`),o.setAttribute("data-gifa11y-state",i),o.setAttribute("data-gifa11y-alt",g),o.innerHTML=`
  <div class="pause" aria-hidden="true"></div>
  <div class="play" aria-hidden="true" style="display:${c}"></div>`;const r=o.querySelector(".pause");r.style.display=d;const l=o.querySelector(".play");if(l.style.display=c,o.classList.add(t.showGifText?"v2":"v1"),t.buttonPauseIconID.length){const f=document.getElementById(t.buttonPauseIconID).innerHTML;r.innerHTML=f}else t.buttonPauseIconHTML.length?r.innerHTML=t.buttonPauseIconHTML:r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/></svg>';if(t.buttonPlayIconID.length){const f=document.getElementById(t.buttonPlayIconID).innerHTML;l.innerHTML=f}else t.buttonPlayIconHTML.length?l.innerHTML=t.buttonPlayIconHTML:l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/></svg>';const m=e.closest('a, button, [role="link"], [role="button"]')||e,b=document.createElement("gifa11y-button");m.insertAdjacentElement("beforebegin",b),b.shadowRoot.appendChild(o),o.addEventListener("click",f=>{f.preventDefault();const w=o.getAttribute("data-gifa11y-state")==="paused"?"playing":"paused",L=new CustomEvent("gifa11yState",{detail:{newState:w,button:o}});if(window.dispatchEvent(L),t.sharedPauseButton){y(w);return}o.setAttribute("data-gifa11y-state",w);const v=o.querySelector(".play"),x=o.querySelector(".pause");o.getAttribute("data-gifa11y-state")==="paused"?(e.style.display="none",s.style.display="block",v.style.display="block",x.style.display="none",o.setAttribute("aria-label",`${t.langPlay} ${g}`)):(e.style.display="block",s.style.display="none",v.style.display="none",x.style.display="block",o.setAttribute("aria-label",`${t.langPause} ${g}`))},!1)}function B(u,t){const e=u,n=document.createElement("canvas");n.setAttribute("role","image"),n.setAttribute("aria-label",e.alt),n.setAttribute("data-gifa11y-canvas",""),n.hidden=!1;const{naturalWidth:s,naturalHeight:a}=e,i=window.devicePixelRatio||1;n.width=t.useDevicePixelRatio?s*i:s,n.height=t.useDevicePixelRatio?a*i:a;const d=()=>{const l=window.getComputedStyle(e);n.style.width=l.width,n.style.height=l.height};d(),window.addEventListener("resize",d);const c=n.getContext("2d",{alpha:!1});if(t.useDevicePixelRatio&&c.scale(i,i),c.drawImage(e,0,0,s,a),e.parentNode.insertBefore(n,e),e.after(n),t.inheritClasses){const l=e.getAttribute("class")||"";n.setAttribute("class",l)}let o=e.getAttribute("alt")?.trim();o||(o=t.langMissingAlt);const r=window.matchMedia("(prefers-reduced-motion: reduce)").matches||e.classList.contains("gifa11y-paused")||e.src.includes("gifa11y-paused")||t.initiallyPaused;e.style.display=r?"none":"",n.style.display=r?"":"none",e.setAttribute("data-gifa11y-state",r?"paused":"playing")}class E{constructor(t){const n={...{buttonBackground:"#072c7c",buttonBackgroundHover:"#0a2051",buttonBorder:"2px solid #fff",buttonBorderRadius:"50%",buttonIconColor:"white",buttonFocusColor:"#00e7ffad",buttonIconSize:"1.5rem",buttonIconFontSize:"1rem",buttonPlayIconID:"",buttonPauseIconID:"",buttonPlayIconHTML:"",buttonPauseIconHTML:"",container:"body",exclusions:"",gifa11yOff:"",inheritClasses:!0,initiallyPaused:!1,langPause:"Pause animation:",langPlay:"Play animation:",langPauseAllButton:"Pause all animations",langPlayAllButton:"Play all animations",langMissingAlt:"Missing image description.",langAltWarning:"Error! Please add alt text to gif.",missingAltWarning:!0,sharedPauseButton:!1,showButtons:!0,showGifText:!1,target:'img[src$=".gif"]',useDevicePixelRatio:!1},...t};window.gifa11yOption=n,window.a11ygifs=[],this.findNew=()=>{const s=[];A(s,n),s.forEach(a=>{const i=()=>{B(a,n),n.showButtons===!0&&I(a,n)};a.complete?i():a.addEventListener("load",i),window.a11ygifs.push(a)})},this.setAll=s=>{y(s)},this.initialize=()=>{(()=>{const{gifa11yOff:a}=n;return a.trim().length>0?document.querySelector(a):!1})()||(customElements.define("gifa11y-button",S),document.addEventListener("DOMContentLoaded",()=>{this.findNew(),p()},!1))},this.initialize()}}return E}));
