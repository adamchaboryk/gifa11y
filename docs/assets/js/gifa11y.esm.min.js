/*! Gifa11y 2.0.4 | @author Adam Chaboryk Â© 2021 - 2025 | @license MIT | @contact adam@chaboryk.xyz | https://github.com/adamchaboryk/gifa11y */
function t(t="detect"){const e=window.gifa11yOption,n=document.getElementById("gifa11y-all"),i=document.querySelector("html");"detect"===t&&(t="paused"===i.getAttribute("data-gifa11y-all")?"playing":"paused");const a=new CustomEvent("gifA11ySet",{detail:{newState:t,target:"all"}});let o,s,l,r;window.dispatchEvent(a),i.setAttribute("data-gifa11y-all",t);"paused"===i.getAttribute("data-gifa11y-all")?(o="block",s="none",l="paused",r=e.langPlay,n.innerText=e.langPlayAllButton,window.gifa11yOption.initiallyPaused=!0):(o="none",s="block",l="playing",r=e.langPause,n.innerText=e.langPauseAllButton,window.gifa11yOption.initiallyPaused=!1),window.a11ygifs.forEach((t=>{t.style.display=s}));document.querySelectorAll("[data-gifa11y-canvas]").forEach((t=>{t.style.display=o}));document.querySelectorAll("gifa11y-button").forEach((t=>{const e=t.shadowRoot.querySelector("button"),n=e.getAttribute("data-gifa11y-alt"),i=e.querySelector(".play"),a=e.querySelector(".pause");i.style.display=o,a.style.display=s,e.setAttribute("data-gifa11y-state",l),e.setAttribute("aria-label",`${r} ${n}`)}))}class e extends HTMLElement{constructor(){super(),this.option=window.gifa11yOption}connectedCallback(){const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.innerHTML=`\n      :host{--gifa11y-font:system-ui,"Segoe UI",roboto,helvetica,arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}*,:after,:before{box-sizing:border-box}button{align-items:center;box-shadow:0 0 16px 0 rgba(0,0,0,.31);cursor:pointer;display:flex;justify-content:center;line-height:normal;margin:12px;min-height:36px;min-width:36px;padding:4px;position:absolute;text-align:center;transition:all .2s ease-in-out;z-index:500}button:before{content:"";inset:-8.5px;min-height:50px;min-width:50px;position:absolute}button:focus{outline:3px solid transparent}.v1{border-radius:50%}.v2{align-items:center;border-radius:5px;display:flex;flex-wrap:wrap;place-content:center center;text-align:center}.v2:after{content:"GIF";display:inline-block;font-family:var(--gifa11y-font);font-weight:600;line-height:0;padding-left:3px;padding-right:3px}i{padding:4px}i,svg{vertical-align:middle}svg{display:block;flex-shrink:0;position:relative}\n      button {\n        background: ${this.option.buttonBackground};\n        border: ${this.option.buttonBorder};\n        color: ${this.option.buttonIconColor};\n      }\n      button:hover, button:focus {\n        background: ${this.option.buttonBackgroundHover};\n      }\n      button:focus {\n        box-shadow: 0 0 0 5px ${this.option.buttonFocusColor};\n      }\n      i {\n        font-size: ${this.option.buttonIconFontSize};\n        min-width: calc(${this.option.buttonIconFontSize} * 1.4);\n        min-height: calc(${this.option.buttonIconFontSize} * 1.4);\n      }\n      svg {\n        height: ${this.option.buttonIconSize};\n        width: ${this.option.buttonIconSize};\n      }\n      button:after {\n        font-size: ${this.option.buttonIconFontSize};\n      }\n      .warning, .warning:hover {\n        border-radius: 5px;\n        background: #cf0000;\n        color: white;\n      }\n      .warning:after {\n        content: '${this.option.langAltWarning}';\n        padding: 5px;\n      }`,t.appendChild(e)}}class n{constructor(n){const i={buttonBackground:"#072c7c",buttonBackgroundHover:"#0a2051",buttonBorder:"2px solid #fff",buttonIconColor:"white",buttonFocusColor:"#00e7ffad",buttonIconSize:"1.5rem",buttonIconFontSize:"1rem",buttonPlayIconID:"",buttonPauseIconID:"",buttonPlayIconHTML:"",buttonPauseIconHTML:"",buttonPauseShared:!1,container:"body",exclusions:"",gifa11yOff:"",inheritClasses:!0,initiallyPaused:!1,langPause:"Pause GIF:",langPlay:"Play GIF:",langPauseAllButton:"Pause all GIFs",langPlayAllButton:"Play all GIFs",langMissingAlt:"Missing image description.",langAltWarning:"Error! Please add alt text to GIF.",missingAltWarning:!0,showButtons:!0,showGifText:!1,target:"",useDevicePixelRatio:!1,...n};window.gifa11yOption=i,window.a11ygifs=[],this.findNew=function(){const e=[];!function(t,e){const n=document.querySelector(e.container),i=n||document.querySelector("body"),a=e.target?`, ${e.target}`:"",o=e.exclusions?`, ${e.exclusions}`:"";Array.from(i.querySelectorAll(`:is(img[src$=".gif"]${a}):not([src*="gifa11y-ignore"], [data-gifa11y-state], .gifa11y-ignore${o})`)).forEach((e=>{t.push(e)}))}(e,i),e.forEach((e=>{const n=()=>{!function(t,e){const n=t,i=document.createElement("canvas");i.setAttribute("role","image"),i.setAttribute("aria-label",n.alt),i.setAttribute("data-gifa11y-canvas",""),i.hidden=!1;const{naturalWidth:a,naturalHeight:o}=n,s=window.devicePixelRatio||1;i.width=e.useDevicePixelRatio?a*s:a,i.height=e.useDevicePixelRatio?o*s:o;const l=()=>{const t=window.getComputedStyle(n);i.style.width=t.width,i.style.height=t.height};l(),window.addEventListener("resize",l);const r=i.getContext("2d",{alpha:!1});if(e.useDevicePixelRatio&&r.scale(s,s),r.drawImage(n,0,0,a,o),n.parentNode.insertBefore(i,n),n.after(i),e.inheritClasses){const t=n.getAttribute("class")||"";i.setAttribute("class",t)}let d=n.getAttribute("alt")?.trim();d||(d=e.langMissingAlt);const u=window.matchMedia("(prefers-reduced-motion: reduce)").matches||n.classList.contains("gifa11y-paused")||n.src.includes("gifa11y-paused")||e.initiallyPaused;n.style.display=u?"none":"",i.style.display=u?"":"none",n.setAttribute("data-gifa11y-state",u?"paused":"playing")}(e,i),!0===i.showButtons&&function(e,n){const i=e,a=window.matchMedia("(prefers-reduced-motion: reduce)"),o=i.nextElementSibling;let s,l,r,d;const u=i.src;!a||a.matches||i.classList.contains("gifa11y-paused")||u.indexOf("gifa11y-paused")>-1||!0===n.initiallyPaused?(s=n.langPlay,d="block",r="none",l="paused"):(s=n.langPause,d="none",r="block",l="playing");const c=document.createElement("button");let g=i.getAttribute("alt");null!==g&&""!==g&&" "!==g||(g=n.langMissingAlt,!0===n.missingAltWarning&&c.classList.add("warning")),c.setAttribute("aria-label",`${s} ${g}`),c.setAttribute("data-gifa11y-state",l),c.setAttribute("data-gifa11y-alt",g),c.innerHTML=`\n  <div class="pause" aria-hidden="true" style="display:${r}"></div>\n  <div class="play" aria-hidden="true" style="display:${d}"></div>`;const y=c.querySelector(".pause"),p=c.querySelector(".play");if(!1===n.showGifText?c.classList.add("v1"):c.classList.add("v2"),n.buttonPauseIconID.length){const t=document.getElementById(n.buttonPauseIconID).innerHTML;y.innerHTML=t}else n.buttonPauseIconHTML.length?y.innerHTML=n.buttonPauseIconHTML:y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/></svg>';if(n.buttonPlayIconID.length){const t=document.getElementById(n.buttonPlayIconID).innerHTML;p.innerHTML=t}else n.buttonPlayIconHTML.length?p.innerHTML=n.buttonPlayIconHTML:p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/></svg>';const b=i.closest('a, button, [role="link"], [role="button"]')||i,f=document.createElement("gifa11y-button");b.insertAdjacentElement("beforebegin",f),f.shadowRoot.appendChild(c),c.addEventListener("click",(e=>{if(e.preventDefault(),n.buttonPauseShared)return void t();const a="paused"===c.getAttribute("data-gifa11y-state")?"playing":"paused";c.setAttribute("data-gifa11y-state",a);const s=new CustomEvent("gifA11ySet",{detail:{newState:a,button:c}});window.dispatchEvent(s);const l=c.querySelector(".play"),r=c.querySelector(".pause");"paused"===c.getAttribute("data-gifa11y-state")?(i.style.display="none",o.style.display="block",l.style.display="block",r.style.display="none",c.setAttribute("aria-label",`${n.langPlay} ${g}`)):(i.style.display="block",o.style.display="none",l.style.display="none",r.style.display="block",c.setAttribute("aria-label",`${n.langPause} ${g}`))}),!1)}(e,i)};e.complete?n():e.addEventListener("load",n),window.a11ygifs.push(e)}))},this.initialize=()=>{(()=>{const{gifa11yOff:t}=i;return t.trim().length>0&&document.querySelector(t)})()||(customElements.define("gifa11y-button",e),document.addEventListener("DOMContentLoaded",(()=>{this.findNew(),function(){const e=window.gifa11yOption,n=document.getElementById("gifa11y-all"),i=window.matchMedia("(prefers-reduced-motion: reduce)"),a=document.querySelector("html");if(null!==n){if(!i||i.matches||e.initiallyPaused?(a.setAttribute("data-gifa11y-all","paused"),n.innerText=e.langPlayAllButton):(a.setAttribute("data-gifa11y-all","playing"),n.innerText=e.langPauseAllButton),n.setAttribute("disabled","true"),window.a11ygifs.filter((t=>!t.complete)).length>0){const e=window.a11ygifs.filter((t=>!t.complete)).map((t=>new Promise((e=>{const n=t;n.onload=e,n.onerror=e}))));Promise.all(e).then((()=>{n.addEventListener("click",(()=>{t()})),n.removeAttribute("disabled")}))}window.setTimeout((()=>{n.addEventListener("click",(()=>{t()})),n.removeAttribute("disabled")}),5e3)}}()}),!1))},this.initialize()}}export{n as default};
